#############
Создание документооборота
#############

Имя ресурса: **/docflows/{docflowType}**

HTTP метод: **POST**

Создание документооборота осуществляется методом ``POST /docflows/{docflowType}``. 

    * docflowType –  тип документооборота.

API Ресстро предоставляет следующие типы документооборота

    * encumbrance_request: регистрация обременения недвижимости 
    * object_request: запрос выписки на объект недвижимости из ЕГРН 
    * additionalpackage_request: запрос на отправку дополнительных файлов в Росреестр 
    * rightmovement_request

В тело метода должен быть помещен json запроса, в котором содержатся необходимые данные для инициализации документооборота. 
Json запроса для каждого типа документооборота состоит из

    * requestId - ID запроса 
    * options - параметров документооборота:

        #. requestId - опциональный внешний идентификатор запроса клиента.
        #. options – параметры документооборота, которые определяют необходимую информацию для отправки запроса в Росреестр. Параметры документооборота зависят от его типа.

Пример содания документооборота
.. code-block:: bash

        POST /realty/v1/docflows/object_request HTTP/1.0
        Host: api.kontur.ru
        Content-Type: application/json
        Content-Length: 123
        Authorization: auth.sid 38f31d7246b148c8abcdf0e240a5e39d
        {
          "requestId": "client-request-12345",
          "options": { <-- параметры документооборота -->
          }
        }


.. note::
        
        Описание параметров документооборота представлено для каждого типа запроса отдельно.

Пример успешного состояния документооборота
.. code-block:: bash

        HTTP/1.0 201 OK
        Content-Type: application/json
        {
        "docflowId": "d20bd506-6325-43e1-b2e4-105ec5d63417",
        "docflowType": "object_request",
        "state": "suspended"
        }


**В случае успешного создания**

Пользователю возвращается

    *  docflowId - идентификатор документооборота
    *  docflowType - тип документооборота
    *  state - состояние документооборота. 
    *  requestId - уникальный идентификатор запроса клиента, если он был указан в запросе


**При неудачном создании**

Пользователю возвращается код 400 с телом описание ошибки Error_ в формате json. 
Ошибка может возникнуть в случае, если был указан некорректный либо не полный набор данных (options).

**Возможные HTTP-коды возврата:**
    * 400 - ошибка отправки,
    * 200 - документооборот успешно создан и переходит в состояние "queued" . 
    * 201 - документооборот успешно создан и переходит в состояние "suspended".


